<!DOCTYPE HTML>
<html>
 <head>
  <title>FF4J - Feature Flipping 4 JAVA</title>
  <meta http-equiv="content-type" 	content="text/html; charset=utf-8" />
  <meta name="description" 			content="FF4J, Feature flipping for Java mode Easy"/>
  <meta name="keywords" 			content="feature,features,toggle,flipping,flag,ff4j,java,toggling,darklaunch,
  open-source,free,github,framework,library,rest,jmx" />
 
  <!--[if lte IE 8]>
  	 <script src="js/html5shiv.js">
  	 </script><link rel="stylesheet" href="css/ie8.css" />
  <![endif]-->
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery.dropotron.min.js"></script>
  <script src="js/config.js"></script>
  <script src="js/skel.min.js"></script>
  <script src="js/skel-panels.min.js"></script>
  <script src="js/prettify.min.js"></script>
  <script src="js/site.js"></script>
  <noscript>
	<link rel="stylesheet" href="css/skel-noscript.css" />
	<link rel="stylesheet" href="css/google.css"        />
	<link rel="stylesheet" href="css/style.css"         />
	<link rel="stylesheet" href="css/style-desktop.css" />
  </noscript>
</head>

<body class="homepage">
  <!-- Header Wrapper -->
  <div id="header-wrapper" class="wrapper" style="height:400px">	
    <div class="container">
	  <div class="row">
	    <div class="12u">

		<!-- Donate -->
		<div style="position:absolute;top:20px;left:80px">
		 <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
		  <input type="hidden" name="cmd" value="_s-xclick">
		  <input type="hidden" name="hosted_button_id" value="XD2BQ9KDJ7SGU">
		  <input type="image" src="https://www.paypalobjects.com/en_GB/i/btn/btn_donate_LG.gif" 
		  border="0" name="submit" alt="Help us">
		  <img alt="" border="0" src="https://www.paypalobjects.com/fr_FR/i/scr/pixel.gif" width="1" height="1">
		 </form>
		</div>
		
		<!-- Header -->
		<div id="header">
		 
		 <!-- Logo -->
		 <div id="logo"  style="top:50px">
		  <h1><img src="images/ff4j.png" /></h1>
		  <span class="byline" style="margin-top:-45px">Feature Flags for Java made Easy</span>
		 </div>

		 <!-- /Logo -->

		 <!-- Navigation Bar -->
		 <nav id="nav" style="margin-top:190px;">
		  <ul>
			<li><a href="https://ff4j-demo.herokuapp.com" class="fa fa-desktop">&nbsp;Live Demo</a>
			<li><a href="#10min" class="fa fa-bookmark">&nbsp;Getting Started</a>
			<li><span class="fa fa-book">&nbsp;Docs</span>
		  <ul>
		    <li><a href="https://github.com/clun/ff4j/wiki" class="fa fa-star"> Reference Doc</span>
			<li><a href="http://github.com/clun/ff4j" class="fa fa-github"> Github </a></li>
			<li><a href="https://github.com/ff4j/ff4j/issues" class="fa fa-question"> Questions</a></li>
			<li><a href="https://discord.gg/svu3akK" class="fa fa-comments"> Discord Chat</a></li>
			<li><span class="fa fa-info">&nbsp; JavaDocs</span>
			 <ul>
			  <li><a href="http://ff4j.org/javadocs/1.8.5/" class="fa fa-book" > 1.8.5</a></li>
			  <li><a href="http://ff4j.org/javadocs/1.6/" class="fa fa-book" > 1.6</a></li>
			 </ul>
			</li>
		  </ul>
		<li><a href="https://github.com/clun/ff4j-samples" class="fa fa-code"> &nbsp;Sample Codes</a></li>
		</ul>
		</nav>

		<nav id="nav" style="margin-top:265px;color:#DDDDEE">
		  Github : <a href="https://github.com/ff4j/ff4j/stargazers" 
		  	 style="text-decoration:none;color:#ffa">
		  	<i class="fa fa-star"></i>&nbsp;<span id="github_stargazers"> -- </span>
		  </a>&nbsp;
		  <a href="https://github.com/ff4j/ff4j/network/members" 
		  	 style="text-decoration:none;color:#faf">
		  	<i class="fa fa-code-fork"></i>&nbsp;<span id="github_forks"> -- </span>
		  </a>&nbsp;
		  <a href="https://github.com/ff4j/ff4j/watchers" 
		  	 style="text-decoration:none;color:#aff">
		  	<i class="fa fa-eye"></i>&nbsp;<span id="github_watchers"> -- </span>
		  </a>
		</nav>
		</div>
       </div>
	  </div>
	 </div>
	</div>
   </div>
   <!-- /Header Wrapper -->
  
	<!-- Intro Wrapper -->
	<div id="intro-wrapper" class="wrapper wrapper-style3">
		<div class="title">Features</div>
		<div class="container" style="padding:0px;margin-top:-20px;">
		
			<div class="row" >
				<div class="12u" style="margin-top:-30px">

					<!-- Features -->
					<section id="features" >
			<div class="feature-list">
								<div>
 <div class="row">
  
  <div class="6u">
  <section>
   <h3 class="fa fa-check">Feature Toggle</h3>
    <p style="margin-left:-10px;text-align:justify">
	 <span style="color:#000088">Enable</span>. and 
	 <span style="color:#000088">disable</span> features at runtime - <u>no deployments</u>. In your code implement multiple paths protected by dynamic predicates (if/then/else).
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_01_featuretoggle.png" target="_blank" />
		<img src="images/feature_01_featuretoggle.png" width="350px" height="220px" style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div>
 
 <div class="6u">
  <section>
   <h3 class="fa fa-user">Role-based Toggling</h3>
    <p style="margin-left:-10px;text-align:justify">
	 Enable features <u>not only</u> with flag values but also drive access with <span style="color:#000088">roles and groups
	 </span> <i>(Canary Release)</i>. Different  frameworks supported starting by Spring Security.
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_02_permissions.png" target="_blank" />
		<img src="images/feature_02_permissions.png" 
			 width="350px" height="220px" 
			 style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div>

 </div><div class="row">
 
 <div class="6u">
  <section>
   <h3 class="fa fa-code-fork">Strategy-based Toggling</h3>
    <p style="margin-left:-10px;text-align:justify">
	 Implement <span style="color:#000088">custom predicates</span> <i>(Strategy Pattern)</i> to evaluate if a feature is enabled. Some are provided out of the box: <i>White/Black lists</i> 
	 ,<i>Time based</i>, <i>Expression based</i>. Connect external source like a Drools rule engine.
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_03_strategy.png" target="_blank" />
		<img src="images/feature_03_strategy.png" width="350px" height="220px" style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div>

 <div class="6u">
  <section>
   <h3 class="fa fa-code">AOP-driven Toggling</h3>
    <p style="margin-left:-10px;text-align:justify">
	 Keep your code <span style="color:#000088">clean and readable</span>: Avoid nested <i>if</i> statements but use <u>annotations</u>. Thanks to <i>Spring AOP</i> target implementation is pick at runtime, and thus driven by feature statuses.
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_04_aop.png" target="_blank" />
		<img src="images/feature_04_aop.png" width="350px" height="220px" style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div> 
 
 </div><div class="row">
 
 <div class="6u">
  <section>
   <h3 class="fa fa-signal">Features Monitoring</h3>
    <p style="margin-left:-10px;text-align:justify">
	 For each features execution, ff4j evaluates the predicate therefore it's possible to collect and record <span style="color:#000088">events, metrics</span> to compute <span style="color:#000088">nice dashboards </span> or draw curves for features usage over time.
	<br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_06_monitoring.png" target="_blank" />
		<img src="images/feature_06_monitoring.png" width="350px" height="220px" style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div> 
 
 <div class="6u">
  <section>
   <h3 class="fa fa-reorder">Audit Trail</h3>
    <p style="margin-left:-10px;text-align:justify">
	 Each action <i>(create, update, delete, toggles)</i> can be <span style="color:#000088">traced and saved</span> in the audit trail for troubleshooting. With <u>permissions management</u> <i>(AuthorizationManager)</i> it's possible to identify users.
	<br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_05_audit.png" target="_blank" />
		<img src="images/feature_05_audit_mini.png" width="350px" height="220px" style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div> 
 
 </div><div class="row">
 
 <div class="6u">
  <section>
   <h3 class="fa fa-desktop">Web Console</h3>
    <p style="margin-left:-10px;text-align:justify">
	 <span style="color:#000088">Administrate FF4j</span> <i>(including features and properties)</i> with the web UI. Packaged as a servlet in the library you will expose it in your backend applications. Almost 10 languages available.
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_07_webconsole.png" target="_blank" />
		<img src="images/feature_07_webconsole.png" width="350px" height="220px" style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div>
 
 <div class="6u">
  <section>
   <h3 class="fa fa-save">Wide choice of Databases</h3>
    <p style="margin-left:-10px;text-align:justify">
	 Our proud: we support <span style="color:#000088">20+ databases technologies</span> to store your features, properties and events. Same business model, multiple implementations. Thanks to extension points it's <u>easy</u> to build your own.
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_08_technos.png" target="_blank" />
		<img src="images/feature_08_technos.png" width="350px" height="220px" style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div>
 
 </div><div class="row">
 
 <div class="6u">
  <section>
 
 <h3 class="fa fa-chevron-right">Command Line Interface</h3>
    <p style="margin-left:-10px;text-align:justify">
	 To automate things or because web ports may be blocked <i>(you know, production...)</i>
	 you can work through SSH using our <span style="color:#000088">Command Line Interface (cli)</span>, our <span style="color:#000088">Shell</span> <b>#devOps</b>. It will interact directly with storages.
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_09_cli.png" target="_blank" />
		<img src="images/feature_09_cli.png" width="350px" height="220px" style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div>
 
 <div class="6u">
  <section>
   <h3 class="fa fa-cogs">JMX and MBeans</h3>
    <p style="margin-left:-10px;text-align:justify">
	 Limited set of operations can be performed through JMX. ff4j exposes some <span style="color:#000088">Mbeans</span> to read metrics or toggle features from external tools <i>(Nagios...)</i>. Not all applications are web based.<i>(batches, shell, standalone...)</i>
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_10_jmx.png" target="_blank" />
		<img src="images/feature_10_jmx.png" width="350px" height="220px" 
			 style="border:0px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div>
 
 </div><div class="row">
 <div class="6u">
  <section>
   <h3 class="fa fa-cogs" style="color:#0000FF">Properties (CMDB)</h3>
    <p style="margin-left:-10px;text-align:justify">
	 Store <u>not only</u> feature statuses but <span style="color:#000088">any property value.</span>. Create <b>properties you can change at runtime</b> . It is integrated with most used frameworks like <i>Spring, Archaius, commons-config or Consul.</i>
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_11_properties.png" target="_blank" />
		<img src="images/feature_11_properties.png" width="350px" height="220px" style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div>
 
 
 <div class="6u">
  <section>
   <h3 class="fa fa-inbox">(Distributed) Cache</h3>
    <p style="margin-left:-10px;text-align:justify">
	 Evaluating predicates may put pressure on DB (high hit ratio). ff4j provides <span style="color:#000088">local and distributed caches</span> to help. <i>(edit feature also evict cache)</i>. Leveraging <b>JSR-107</b> it supports most of cache solutions.
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="images/feature_12_caching.png" target="_blank" />
		<img src="images/feature_12_caching.png" width="350px" height="220px" 
			 style="border:1px solid #DDDDDD;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div>
 
 </div><div class="row">
 
 <div class="6u">
  <section>
   <h3 class="fa fa-leaf">Spring Boot Starter</h3>
    <p style="margin-left:-10px;text-align:justify">
	 Import <span style="color:#000088">ff4j-spring-boot-starter</span> dependency in your microservices to get the <u>web console</u> and <u>rest api</u> working immediately. <i>(To be used for the backend app</i>. Now compliant with <b>Spring Boot 2x: </b>👉 <a href="https://github.com/ff4j/ff4j-samples/tree/master/spring-boot-2x">SAMPLES</a>
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="images/spring-boot.png" target="_blank" />
		<img src="images/spring-boot.png" width="350px" height="220px" style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div>
 
 <div class="6u">
  <section>
   <h3 class="fa fa-link">REST Api</h3>
    <p style="margin-left:-10px;text-align:justify">
	  Operate FF4j through a <span style="color:#000088">WEB API</span>. This is the way to go to use ff4j with others languages, specially <b>javascript frontends.</b><i>(also: leverage on FeatureStoreHttp to avoid microservices to directly connect to the DB.</i>
	 <br/><br/>
	 <center>
	 <a class="gallerypic" href="http://ff4j.org/rest-api" target="_blank" />
		<img src="images/console-restapi.png" width="350px" height="220px" style="border:1px solid #AAAAAA;margin-left:-5px;"/>
		<span class="zoom-icon">
         <img src="images/gallery.png" width="64" height="64" alt="Zoom">
        </span>
     </a>
	</center>
	</p>
  </section>
 </div>
 
						</section>
						<!-- /Features -->

				</div>
			</div>
		</div>
	</div>
	<!-- /Intro Wrapper -->

	<!-- Main Wrapper -->
	<div class="wrapper wrapper-style2">
		<div class="title">Getting Started</div>
		<div class="container">
			<div class="row">
				<div class="12u">
				
						<!-- Features -->
						<section id="features" style="margin-top:-100px">
							
		 
<p style="color:#AAA"><a name="10min"></a><br/><h2 style="color:#000088">1. Run DEMO on my laptop</h2>
<div class="prettyprint linenums">

<br/>A live demo is running at <a href="https://ff4j-demo.herokuapp.com/"/>https://ff4j-demo.herokuapp.com/</a> <i>(it can take up to 30s to start, heroku start the demo only on-demand)</i>. The following steps will help you build this sample.
<p><br/><b>1.a - Using DOCKER</b>
<br/>If you already have Docker install on your machine you can simply run the demo  with the  command below, it should start at <a href="http://localhost:8080"/>http://localhost:8080</a>. 🤘 
<pre style="font-family:courier new;font-size:13px">docker run -p 8080:8080 ff4j/ff4j-sample-springboot2x:1.8.5
</pre>
</div>

<div class="prettyprint linenums">
<br/><b>1.b - Using MAVEN</b>
<br/>The source code of this demo is available on youtube at <a href="https://github.com/ff4j/ff4j-samples/tree/master/spring-boot-2x/ff4j-sample-springboot2x"/>https://github.com/ff4j/ff4j-samples/tree/master/spring-boot-2x/ff4j-sample-springboot2x</a> let's clone and run the sample. It should (also) start at <a href="http://localhost:8080"/>http://localhost:8080</a>. You can now start to copy paste or retro engineering, sometime the fastest way right. <br/><p>
<pre style="font-family:courier new;font-size:13px">git clone https://github.com/ff4j/ff4j-samples.git

cd spring-boot-2x/ff4j-sample-springboot2x

mvn spring-boot:run
</pre>

<p>
<br/><i>This is what it look likes</i>
<br/><a href="images/getstarting-00-demo.png" target="_blank">
	<img src="images/getstarting-00-demo.png" alt="" width="600px" 
		 style="border:1px solid #CCCCCC;"/>
</a>
</div>


<p style="color:#AAA"><a name="10min"></a><h2 style="color:#000088">2. Build the project step-by-step</h2>

<br/><b>2.a - What application</b>
<br/>FF4j can be used in any java application (including Android). 90% of the code is working with JDK1.6+ but it is now recommended to use at JDK8+. The single dependency you have to specified in <span class="source-code">pom.xml</span> is <b>ff4j-core</b>. Tt contains an in-memory implementation for each store. On top of it, you add extra dependencies <b>ff4j-core-*</b> to define which database technology to use. <span class="source-code">FeatureStore, PropertyStore and EventRepository</span> don't have to use the same storage technology.

<p>
<br/>As FF4j provides REST-API and a web console we may want to create a web application to get the most of this tutorial. We will use Spring-Boot but the same steps could be adapted for application.
</p>

<b>2.b - Create project skeleton</b>

<p>You can create your project in multiple ways using your IDE or a maven archetype. For this tutorial we will use the website <a href="https://start.spring.io/">https://start.spring.io/</a> entering some package name, project name and adding the <span class="source-code">Spring WEB</span> module and then click GENERATE to download the app.

<p><i>This is what it look likes</i>
<br/><a href="images/getstarting-01-spring.png" target="_blank">
	<img src="images/getstarting-01-spring.png" alt="" width="500px" 
		 style="border:1px solid #CCCCCC;"/>
</a>
			
<div class="prettyprint linenums">
Unzip, import the project in your favorite IDE, open your  <span class="source-code">pom.xml</span> file and add the following dependencies.
<br/><pre style="font-family:courier new;font-size:13px">&lt;dependency&gt;
 &lt;groupId&gt;org.ff4j&lt;/groupId&gt;
 &lt;artifactId&gt;ff4j-spring-boot-starter&lt;/artifactId&gt;
 &lt;version&gt;${ff4j.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
 &lt;groupId&gt;org.ff4j&lt;/groupId&gt;
 &lt;artifactId&gt;ff4j-web&lt;/artifactId&gt;
 &lt;scope&gt;test&lt;/scope&gt;
 &lt;version&gt;${ff4j.version}&lt;/version&gt;
&lt;/dependency&gt;	  
</pre></div>

<div class="prettyprint linenums">
<br/>You will define the property <span class="source-code">ff4j.version</span> to match the current version <i class="fa fa-tag"></i>&nbsp<span id="github_releases"> -- </span> 
<pre style="font-family:courier new;font-size:13px">&lt;properties&gt;
  &lt;ff4j.version&gt;...&lt;/ff4j.version&gt;
&lt;/properties&gt;
</pre></div>

<p>
<br/><b>2.c - Define FF4j Object</b>
<br/>With the Spring framework we use the annotations <span class="source-code">@Configuration</span> and <span class="source-code">@Bean</span> to define our <b>FF4j</b> object. <span class="source-code">FeatureStore, PropertyStore and EventRepository</span> are all initialized with in-memory implementations by default.At the FF4j level exist some flags to enable features like audit or feature autocreation <i>(default behaviour is throwing <span class="source-code">FeatureNotFoundException</span>)</i>
<div class="prettyprint linenums">
<pre style="font-family:courier new;font-size:13px">
import org.ff4j.FF4j;
import org.ff4j.audit.repository.InMemoryEventRepository;
import org.ff4j.property.store.InMemoryPropertyStore;
import org.ff4j.store.InMemoryFeatureStore;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class FF4jConfig {
    
    @Bean
    public FF4j getFF4j() {
        FF4j ff4j = new FF4j();
        
        /* 
         * Implementation of each store. Here this is boiler plate as if nothing 
         * is specified the inmemory is used. Those are really the one that will
         * change depending on your technology.
         */
        ff4j.setFeatureStore(new InMemoryFeatureStore());
        ff4j.setPropertiesStore(new InMemoryPropertyStore());
        ff4j.setEventRepository(new InMemoryEventRepository());

        // Enabling audit and monitoring, default value is false
        ff4j.audit(true);

        // When evaluting not existing features, ff4j will create then but disabled 
        ff4j.autoCreate(true);

        // To define RBAC access, the application must have a logged user
        //ff4j.setAuthManager(...);

        // To define a cacher layer to relax the DB, multiple implementations
        //ff4j.cache([a cache Manager]);
        
        return ff4j;
    }
}
</pre>
</div>

<p>
<br/><b>2.d - Expose the Web Console</b>

<br/>Exposing the web console is only relevant for backend applications (probably centralized) and not in each component using ff4j. Even you secure with user/password, there is not point to open that breach. That been said, let's do it. 

<p/>The servlet to expose is <span class="source-code">org.ff4j.web.FF4jDispatcherServlet</span>. In Spring Boot application you do not use the <span class="source-code">web.xml</span> file (yet <a href="https://github.com/ff4j/ff4j-samples/blob/master/webapp-jetty/ff4j-sample-web/src/main/webapp/WEB-INF/web.xml">here is a sample</a>) but rather define the proper bean and annotate with <span class="source-code">@Configuration</span>. Using SpringMVC we extends the <span class="source-code">SpringBootServletInitializer</span>
<div class="prettyprint linenums">
<pre style="font-family:courier new;font-size:13px">
@Configuration
// Enable the REST API documentation
@EnableFF4jSwagger
// The class should be on classpath : FF4jDispatcherServlet
@ConditionalOnClass({FF4jDispatcherServlet.class})
// Setup FF4j first, not is required
@AutoConfigureAfter(FF4jConfig.class)
public class FF4jWebConsoleConfiguration extends SpringBootServletInitializer {
    @Bean
    @ConditionalOnMissingBean
    public FF4jDispatcherServlet defineFF4jServlet(FF4j ff4j) {
        FF4jDispatcherServlet ff4jConsoleServlet = new FF4jDispatcherServlet();
        ff4jConsoleServlet.setFf4j(ff4j);
        return ff4jConsoleServlet;
    }
    @Bean
    @SuppressWarnings({"rawtypes","unchecked"})
    public ServletRegistrationBean registerFF4jServlet(FF4jDispatcherServlet ff4jDispatcherServlet) {
        return new ServletRegistrationBean(ff4jDispatcherServlet, "/ff4j-web-console/*");
    }
}
</pre>
</div>
<br/>That's it you should now be able to start the application and having the web console responsing at <span class="source-code">/ff4j-web-console/</span> and the rest api responding at <span class="source-code">/api/ff4j</span>.

<p><br/><b>2.e - Define a sample controller</b>

<br/>With the previous steps you do have a working sample but no features or properties to play with. In the demo we added a rest controller mapped to root path <span class="source-code">/</span>. In the one we define 3 features <i>(showWebConsoleURL, showRestApiURL, showUserName)</i> and 1 property <i>(username).</i>

<div class="prettyprint linenums">
<pre style="font-family:courier new;font-size:13px">
@RestController
@RequestMapping("/")
public class HomeController {
    
    private static final Logger LOGGER = LoggerFactory.getLogger(HomeController.class);
    private static final String FEATURE_SHOW_WEBCONSOLE = "showWebConsoleURL";
    private static final String FEATURE_SHOW_REST_API   = "showRestApiURL";
    private static final String FEATURE_SHOW_USERNAME   = "showUserName";
    private static final String PROPERTY_USERNAME       = "username";
    
    @Autowired
    public FF4j ff4j;
    
    @PostConstruct
    public void populateDummyFeatureForMySample() {
        if (!ff4j.exist(FEATURE_SHOW_WEBCONSOLE)) {
            ff4j.createFeature(new Feature(FEATURE_SHOW_WEBCONSOLE, true));
        }
        if (!ff4j.exist(FEATURE_SHOW_REST_API)) {
            ff4j.createFeature(new Feature(FEATURE_SHOW_REST_API, true));
        }
        if (!ff4j.exist(FEATURE_SHOW_USERNAME)) {
            ff4j.createFeature(new Feature(FEATURE_SHOW_USERNAME, true));
        }
        if (!ff4j.getPropertiesStore().existProperty(PROPERTY_USERNAME)) {
            ff4j.createProperty(new PropertyString(PROPERTY_USERNAME, "cedrick"));
        }
        LOGGER.info(" + Features and properties have been created for the sample.");
    }
</pre>
</div>

<br/>Then we display a text on screen based on the value of the flag. We that simply displaying the home page will trigger the features and we would have to events in the monitoring screen. This is also a good way to provide URL to the web console and the rest API:

<div class="prettyprint linenums">
<pre style="font-family:courier new;font-size:13px">
@RequestMapping(value = "/", method = RequestMethod.GET, produces = "text/html")
    public String get() {
        LOGGER.info(" + Rendering home page...");
        StringBuilder htmlPage = new StringBuilder("&lt;html&gt;&lt;body&gt;&lt;ul&gt;");
        htmlPage.append("&lt;h2&gt;This is home page.&lt;/h2&gt;");
        htmlPage.append("&lt;p&gt;Displaying the links below is driven by features in FF4j."
                + "If you disable the feature "
                + "the link will disapear (but the servlet will still response, "
                + "this is just a trick to illustrate "
                + "response in the UI)&lt;/p&gt;");
        htmlPage.append("&lt;p&gt;&lt;b&gt;List of resources for you :"
                + "&lt;/b&gt;&lt;br/&gt;&lt;ul&gt;");
        if (ff4j.check(FEATURE_SHOW_WEBCONSOLE)) {
            htmlPage.append("&lt;li&gt; To access the <b&gt;WEB CONSOLE&lt;/b&gt; "
                    + "please go to &lt;a href=\"./ff4j-web-console/home\" target=\"_blank\"&gt;ff4j-web-console &lt;/a&gt;&lt;/li&gt;");
        }
        if (ff4j.check(FEATURE_SHOW_REST_API)) {
            htmlPage.append("&lt;li> To access the &lt;b>REST API&lt;/b> "
                    + "please go to &lt;a href=\"./api/ff4j\" target=\"_blank\"&gt;ff4j-rest-api &lt;/a&gt;");
        }
        if (ff4j.check(FEATURE_SHOW_USERNAME)) {
            if (ff4j.getPropertiesStore().existProperty(PROPERTY_USERNAME)) {
                htmlPage.append("&lt;li&gt; " + PROPERTY_USERNAME + " value is ");
                htmlPage.append("&lt;span style=\"color:blue;font-weight:bold\"&gt;");
                htmlPage.append(ff4j.getPropertiesStore().readProperty(PROPERTY_USERNAME).asString());
                htmlPage.append("&lt;/span&gt;");
            } else {
                htmlPage.append("&lt;li&gt; " + PROPERTY_USERNAME + " does not exist.");
            }
        }
        htmlPage.append("&lt;/ul&gt;&lt;/body&gt;&lt;/html&gt;");
        return htmlPage.toString();
}
</pre>
</div>
  
<br/>Congratulations you are done with this getting started. You can now move to a set of <a href="https://github.com/ff4j/ff4j-samples">SAMPLES</a> or jump into the reference guide, which is <a href="https://github.com/ff4j/ff4j/wiki">our wiki on github.</a>
						</section>
						<!-- /Features -->

					</div>
					<!-- /Main -->

				</div>
			</div>
		</div>
	</div>
	<!-- /Main Wrapper -->

	<!-- Highlights Wrapper -->
	<div class="wrapper wrapper-style3">
		<div class="title"> Use Cases</div>
		<div class="container">
			<div class="row">
				<div class="12u">

					<!-- Highlights -->
					<div id="highlights">
						<div>
							<div class="row">
								<div class="4u">
									<section class="highlight highlight-one">
										<a href="images/usecase-featurebranching.png" class="image image-full"><img
											src="images/usecase-featurebranching.png" alt="" width="300px" height="200px"/></a>
										<h3>
											<a href="#">Avoid Feature Branching</a>
										</h3>
										<p>Feature branches lead to conflict during merges. Use trunk-based-developpement
										to toggle-off unfinished code when develop continously.</p>
									</section>
								</div>
								<div class="4u">
									<section class="highlight highlight-two">
										<a href="images/usecase-bluegreen.png" class="image image-full"><img
											src="images/usecase-bluegreen.png" alt="" width="300px" height="200px"/></a>
										<h3>
											<a href="#">Blue/Green Deployments</a>
										</h3>
										<p>Avoid clusters nodes inconsistency during deployment and deliver new features desactivated. Toggle
										"ON"" when all nodes are up-to-date and ready.</p>
									</section>
								</div>
								<div class="4u">
									<section class="highlight highlight-three">
										<a href="images/usecase-canary.png" class="image image-full"><img
											src="images/usecase-canary.png" alt="" width="300px" height="200px"/></a>
										<h3>
											<a href="#">Canary Release</a>
										</h3>
										<p>Do not create dedicated infrastructure to qualify new features. Open them for subset of beta-testers
										and directly into production environments.</p>
									</section>
								</div>
							</div>
							<div class="row">
								<div class="4u">
									<section class="highlight highlight-one">
										<a href="images/usecase-darklaunch.png" class="image image-full"><img
											src="images/usecase-darklaunch.png" alt="" width="300px" height="200px"/></a>
										<h3>
											<a href="#">Dark Launch</a>
										</h3>
										<p>Measure performance impacts of new features. Activate them dynamically on a 
										defined ratio of incoming requests and observe system responses.</p>
									</section>
								</div>
								<div class="4u">
									<section class="highlight highlight-two">
										<a href="images/usecase-graceful.png" class="image image-full"><img
											src="images/usecase-graceful.png" alt="" width="300px" height="200px"/></a>
										<h3>
											<a href="#">Graceful degradation</a>
										</h3>
										<p>Tune and protect your system of heavy loads: focus on high business value requests and
										discard others dynamically (clients vs prospects, carts contents..).</p>
									</section>
								</div>
								<div class="4u">
									<section class="highlight highlight-three">
										<a href="images/usecase-thinclient.png" class="image image-full"><img
											src="images/usecase-thinclient.png" alt="" width="300px" height="200px"/></a>
										<h3>
											<a href="#">Thin client application</a>
										</h3>
										<p>Avoid annoying frequent deployments and downloads of mobile applications by providing empty 
										shelf: request expected active features to YOUR servers.</p>
									</section>
								</div>
							</div>
							<div class="row">
								<div class="4u">
									<section class="highlight highlight-one">
										<a href="images/usecase-businesstoggle.png" class="image image-full"><img
											src="images/usecase-businesstoggle.png" alt="" width="300px" height="200px"/></a>
										<h3>
											<a href="#">Business Toggle</a>
										</h3>
										<p>Toggling is not only technical. Define your own rules and evaluate features based on
										business requirements like office hours, user profiles...</p>
									</section>
								</div>
								<div class="4u">
									<section class="highlight highlight-two">
										<a href="images/usecase-abtesting.png" class="image image-full"><img
											src="images/usecase-abtesting.png" alt="" width="300px" height="200px"/></a>
										<h3>
											<a href="#">A/B Testing</a>
										</h3>
										<p>Split A and B populations using a business toggle. Measure business impacts not only
										with CRM but also hitcounts of very same framework. </p>
									</section>
								</div>
								<div class="4u">
									<section class="highlight highlight-three">
										<a href="images/usecase-circuitbreaker.png" class="image image-full"><img
											src="images/usecase-circuitbreaker.png" alt="" width="300px" height="200px"/></a>
										<h3>
											<a href="#">Circuit Breaker</a>
										</h3>
										<p>Implement the <a href="http://martinfowler.com/bliki/CircuitBreaker.html">circuit breaker</a> pattern with a 
										dedicated strategy and custom rules allowing to toggle off proactively not available features.</p>
									</section>
								</div>
							</div>
						</div>
					</div>
					<!-- /Highlights -->

				</div>
			</div>
		</div>
	</div>
	<!-- /Highlights Wrapper -->

	<!-- Footer Wrapper -->
	<div id="footer-wrapper" class="wrapper">
		<div class="title">Links</div>
		<div class="container">
			<div class="row">
				<div class="12u">

					<!-- Footer -->
					<div id="footer">
						<div>
							<div class="row">
								
								<div class="12u">

									<!-- Contacts -->
									<section class="footer-two">
										<div class="feature-list feature-list-small">
											<div>
												<div class="row">
													<div class="4u">
														<section>
															<h4 class="fa fa-github"><a href="http://github.com/clun" style="color:#00ab8b">&nbsp;&nbsp;Github</a></h4>
															<p>
																
															</p>
														</section>
													</div>
													<div class="4u">
														<section>
															<h4 class="fa fa-twitter"><a href="http://twitter.com/clunven" style="color:#00ab8b">&nbsp;&nbsp;@clunven</h4>
														</section>
													</div>
													<div class="4u">
														<section>
															<h4 class="fa fa-envelope">
																<a href="https://groups.google.com/forum/?hl=fr#!forum/ff4j" style="color:#00ab8b">&nbsp;&nbsp;Support
															</h4>
														</section>
													</div>
												</div>
											</div>
										</div>
									</section>
								</div>
							</div>
						</div>
					</div>
					<!-- /Footer -->

					<!-- Copyright -->
					<div id="copyright">
						<span>  ff4j&copy; 2013-2020 - All right reserved.</span>
					</div>
					<!-- /Copyright -->

				</div>
			</div>
		</div>
	</div>
	<!-- /Footer Wrapper -->
	
	<a href="https://github.com/clun/ff4j"><img 
		style="position: absolute; top: 0; right: 0; border: 0;" 
		src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" 
		alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
	
	<!-- Analytics -->
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99337757-1', 'auto');
  ga('send', 'pageview');

</script>
	
</body>
</html>